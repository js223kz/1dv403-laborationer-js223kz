{"filter":false,"title":"ThumbNailWindow.js","tooltip":"/5-pwd/js/ThumbNailWindow.js","undoManager":{"mark":100,"position":100,"stack":[[{"group":"doc","deltas":[{"start":{"row":15,"column":76},"end":{"row":15,"column":77},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":77},"end":{"row":15,"column":78},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":78},"end":{"row":15,"column":79},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":79},"end":{"row":15,"column":80},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":77},"end":{"row":15,"column":80},"action":"remove","lines":["pos"]},{"start":{"row":15,"column":77},"end":{"row":15,"column":86},"action":"insert","lines":["positionY"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":86},"end":{"row":15,"column":87},"action":"insert","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":87},"end":{"row":15,"column":88},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":88},"end":{"row":15,"column":89},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":89},"end":{"row":15,"column":90},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":90},"end":{"row":15,"column":91},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":91},"end":{"row":15,"column":92},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":88},"end":{"row":15,"column":92},"action":"remove","lines":["head"]},{"start":{"row":15,"column":88},"end":{"row":15,"column":96},"action":"insert","lines":["headLine"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":96},"end":{"row":15,"column":97},"action":"insert","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":97},"end":{"row":15,"column":98},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":98},"end":{"row":15,"column":99},"action":"insert","lines":["w"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":99},"end":{"row":15,"column":100},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":98},"end":{"row":15,"column":100},"action":"remove","lines":["wi"]},{"start":{"row":15,"column":98},"end":{"row":15,"column":103},"action":"insert","lines":["width"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":103},"end":{"row":15,"column":104},"action":"insert","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":104},"end":{"row":15,"column":105},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":105},"end":{"row":15,"column":106},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":106},"end":{"row":15,"column":107},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":107},"end":{"row":15,"column":108},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":105},"end":{"row":15,"column":108},"action":"remove","lines":["hei"]},{"start":{"row":15,"column":105},"end":{"row":15,"column":111},"action":"insert","lines":["height"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":88},"end":{"row":15,"column":89},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":89},"end":{"row":15,"column":90},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":90},"end":{"row":15,"column":91},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":91},"end":{"row":15,"column":92},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":92},"end":{"row":15,"column":93},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":4},"end":{"row":8,"column":5},"action":"insert","lines":["v"]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":5},"end":{"row":8,"column":6},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":6},"end":{"row":8,"column":7},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":7},"end":{"row":8,"column":8},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":8},"end":{"row":8,"column":9},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":9},"end":{"row":8,"column":10},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":10},"end":{"row":8,"column":11},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":11},"end":{"row":8,"column":12},"action":"insert","lines":["g"]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":12},"end":{"row":8,"column":13},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":13},"end":{"row":8,"column":14},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":14},"end":{"row":8,"column":15},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":14},"end":{"row":8,"column":15},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":14},"end":{"row":8,"column":15},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":15},"end":{"row":9,"column":0},"action":"insert","lines":["",""]},{"start":{"row":9,"column":0},"end":{"row":9,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":4},"end":{"row":9,"column":5},"action":"insert","lines":["v"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":5},"end":{"row":9,"column":6},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":6},"end":{"row":9,"column":7},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":7},"end":{"row":9,"column":8},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":8},"end":{"row":9,"column":9},"action":"insert","lines":["w"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":9},"end":{"row":9,"column":10},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":10},"end":{"row":9,"column":11},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":11},"end":{"row":9,"column":12},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":12},"end":{"row":9,"column":13},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":13},"end":{"row":9,"column":14},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":61},"end":{"row":16,"column":0},"action":"insert","lines":["",""]},{"start":{"row":16,"column":0},"end":{"row":16,"column":16},"action":"insert","lines":["                "]}]}],[{"group":"doc","deltas":[{"start":{"row":27,"column":4},"end":{"row":27,"column":24},"action":"remove","lines":["var response = null;"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":14},"end":{"row":10,"column":0},"action":"insert","lines":["",""]},{"start":{"row":10,"column":0},"end":{"row":10,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":4},"end":{"row":10,"column":24},"action":"insert","lines":["var response = null;"]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":16},"end":{"row":17,"column":17},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":17},"end":{"row":17,"column":18},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":18},"end":{"row":17,"column":19},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":19},"end":{"row":17,"column":20},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":20},"end":{"row":17,"column":21},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":16},"end":{"row":17,"column":21},"action":"remove","lines":["respo"]},{"start":{"row":17,"column":16},"end":{"row":17,"column":24},"action":"insert","lines":["response"]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":24},"end":{"row":17,"column":25},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":25},"end":{"row":17,"column":26},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":26},"end":{"row":17,"column":27},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":16},"end":{"row":17,"column":27},"action":"remove","lines":["response.he"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":110},"end":{"row":18,"column":116},"action":"remove","lines":["height"]},{"start":{"row":18,"column":110},"end":{"row":18,"column":111},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":111},"end":{"row":18,"column":112},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":110},"end":{"row":18,"column":112},"action":"remove","lines":["re"]},{"start":{"row":18,"column":110},"end":{"row":18,"column":118},"action":"insert","lines":["response"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":118},"end":{"row":18,"column":119},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":119},"end":{"row":18,"column":120},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":120},"end":{"row":18,"column":121},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":121},"end":{"row":18,"column":122},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":119},"end":{"row":18,"column":122},"action":"remove","lines":["hei"]},{"start":{"row":18,"column":119},"end":{"row":18,"column":125},"action":"insert","lines":["height"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":103},"end":{"row":18,"column":108},"action":"remove","lines":["width"]},{"start":{"row":18,"column":103},"end":{"row":18,"column":104},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":104},"end":{"row":18,"column":105},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":103},"end":{"row":18,"column":105},"action":"remove","lines":["re"]},{"start":{"row":18,"column":103},"end":{"row":18,"column":111},"action":"insert","lines":["response"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":111},"end":{"row":18,"column":112},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":112},"end":{"row":18,"column":113},"action":"insert","lines":["w"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":113},"end":{"row":18,"column":114},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":114},"end":{"row":18,"column":115},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":115},"end":{"row":18,"column":116},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":116},"end":{"row":18,"column":117},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":16},"end":{"row":20,"column":17},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":17},"end":{"row":20,"column":18},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":19,"column":64},"end":{"row":19,"column":81},"action":"remove","lines":[", templateContent"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":38},"end":{"row":18,"column":46},"action":"remove","lines":["Template"]},{"start":{"row":18,"column":38},"end":{"row":18,"column":39},"action":"insert","lines":["J"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":39},"end":{"row":18,"column":40},"action":"insert","lines":["O"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":38},"end":{"row":18,"column":40},"action":"remove","lines":["JO"]},{"start":{"row":18,"column":38},"end":{"row":18,"column":44},"action":"insert","lines":["JOSZEP"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":44},"end":{"row":18,"column":45},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":45},"end":{"row":18,"column":46},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":46},"end":{"row":18,"column":47},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":47},"end":{"row":18,"column":48},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":45},"end":{"row":18,"column":48},"action":"remove","lines":["cre"]},{"start":{"row":18,"column":45},"end":{"row":18,"column":59},"action":"insert","lines":["createTemplate"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":84,"column":2},"action":"remove","lines":["\"use strict\";","function ThumbNailWindow(id, positionX, positionY, headLine){","    TemplateWindow.call(this, id, positionX, positionY, headLine); ","}","","ThumbNailWindow.prototype = new TemplateWindow();","","ThumbNailWindow.prototype.fillContent = function (){","    var height;","    var width;","    var response = null;","    var AJAX_req = new XMLHttpRequest();","        AJAX_req.open( \"GET\",\"https://homepage.lnu.se/staff/tstjo/labbyServer/imgviewer/\", true);","        ","        AJAX_req.onreadystatechange = function(){","            if( AJAX_req.readyState == 4 && AJAX_req.status == 200){","                response = JSON.parse(AJAX_req.responseText);","                ","                var newTemplate = new JOSZEP.createTemplate(this.id, this.positionX, this.positionY, this.headLine, response.width, response.height)","                ThumbNailWindow.prototype.renderContent(response);","                //templateWindow.querySelector(\".activityindicator\").style.display = \"none\";","            }","        };","    AJAX_req.send(null); ","};","","ThumbNailWindow.prototype.renderContent = function (response, templateContent){","    ","    ","    var body = document.querySelector(\"body\");","    var templateWindow = document.getElementById(this.id);","    var templateContent = templateWindow.querySelector(\".templatecontent\");","    templateContent.style.height = \"370px\";","","    templateWindow.addEventListener(\"click\", function(e){","        body.appendChild(templateWindow);","    });","    ","    var jsonArray = [];","   ","    for(var item in response){","       jsonArray.push({URL:response[item].URL, thumbURL:response[item].thumbURL, width:response[item].width, height: response[item].height});","    }","    ","    renderGridLayout();","    ","    function renderGridLayout(){","        ","        var thumbNailWrapper = document.createElement(\"div\");","        thumbNailWrapper.setAttribute(\"class\", \"thumbnailwrapper\");","        templateContent.appendChild(thumbNailWrapper);","        var numberOfRows = Math.ceil(jsonArray.length / 3);","        var rows = 0;","        var columns = 0;","        ","        for(rows = 0; rows < numberOfRows; rows++){","            for(columns=0; columns < 3; columns++){","                createThumbNails(rows, columns, thumbNailWrapper);","            }","        }    ","    }","    function createThumbNails(rows, cols, thumbNailTable){","        var position = rows*3 + cols;","        var body = document.querySelector(\"body\");","        var imageWrapper = document.createElement(\"div\");","            imageWrapper.setAttribute(\"class\", \"imagewrapper\");","        ","        var thumbNailImage = document.createElement(\"img\");","            thumbNailImage.setAttribute(\"class\", \"thumbnailimage\");","            thumbNailImage.src = jsonArray[position].thumbURL;","            ","            thumbNailImage.addEventListener(\"click\", function(e){","                var positionX = 200;","                var positionY = 400;","                var date = new Date();","                var newWindow = new ImageWindow(date.getTime(), positionX, positionY, \"Vald Bild\");","                newWindow.renderTemplate(jsonArray[position].width, jsonArray[position].height);","                newWindow.fillContent(jsonArray[position].URL, jsonArray[position].width, jsonArray[position].height);","            }); ","        ","        imageWrapper.appendChild(thumbNailImage);","        thumbNailTable.appendChild(imageWrapper);","        ","    }","};"]},{"start":{"row":0,"column":0},"end":{"row":77,"column":2},"action":"insert","lines":["\"use strict\";","function ThumbNailWindow(id, positionX, positionY, headLine){","    TemplateWindow.call(this, id, positionX, positionY, headLine); ","}","","ThumbNailWindow.prototype = new TemplateWindow();","","ThumbNailWindow.prototype.fillContent = function (){","    var response = null;","    var body = document.querySelector(\"body\");","    var templateWindow = document.getElementById(this.id);","    var templateContent = templateWindow.querySelector(\".templatecontent\");","    templateContent.style.height = \"370px\";","","    templateWindow.addEventListener(\"click\", function(e){","        body.appendChild(templateWindow);","    });","    ","    var AJAX_req = new XMLHttpRequest();","        AJAX_req.open( \"GET\",\"https://homepage.lnu.se/staff/tstjo/labbyServer/imgviewer/\", true);","        ","        AJAX_req.onreadystatechange = function(){","            if( AJAX_req.readyState == 4 && AJAX_req.status == 200){","                response = JSON.parse(AJAX_req.responseText);","                ThumbNailWindow.prototype.renderContent(response, templateContent);","                templateWindow.querySelector(\".activityindicator\").style.display = \"none\";","            }","        };","    AJAX_req.send(null); ","};","","ThumbNailWindow.prototype.renderContent = function (response, templateContent){","    var jsonArray = [];","   ","    for(var item in response){","       jsonArray.push({URL:response[item].URL, thumbURL:response[item].thumbURL, width:response[item].width, height: response[item].height});","    }","    ","    renderGridLayout();","    ","    function renderGridLayout(){","        ","        var thumbNailWrapper = document.createElement(\"div\");","        thumbNailWrapper.setAttribute(\"class\", \"thumbnailwrapper\");","        templateContent.appendChild(thumbNailWrapper);","        var numberOfRows = Math.ceil(jsonArray.length / 3);","        var rows = 0;","        var columns = 0;","        ","        for(rows = 0; rows < numberOfRows; rows++){","            for(columns=0; columns < 3; columns++){","                createThumbNails(rows, columns, thumbNailWrapper);","            }","        }    ","    }","    function createThumbNails(rows, cols, thumbNailTable){","        var position = rows*3 + cols;","    ","        var imageWrapper = document.createElement(\"div\");","            imageWrapper.setAttribute(\"class\", \"imagewrapper\");","        ","        var thumbNailImage = document.createElement(\"img\");","            thumbNailImage.setAttribute(\"class\", \"thumbnailimage\");","            thumbNailImage.src = jsonArray[position].thumbURL;","            ","            thumbNailImage.addEventListener(\"click\", function(e){","                var positionX = 500;","                var positionY = 200;","                var date = new Date();","                var newWindow = new ImageWindow(date.getTime(), positionX, positionY, \"Vald Bild\");","                newWindow.renderTemplate();","                newWindow.fillContent(jsonArray[position].URL, jsonArray[position].width, jsonArray[position].height);","            }); ","        ","        imageWrapper.appendChild(thumbNailImage);","        thumbNailTable.appendChild(imageWrapper);      ","    }","};"]}]}],[{"group":"doc","deltas":[{"start":{"row":66,"column":32},"end":{"row":66,"column":35},"action":"remove","lines":["500"]},{"start":{"row":66,"column":32},"end":{"row":66,"column":33},"action":"insert","lines":["2"]}]}],[{"group":"doc","deltas":[{"start":{"row":66,"column":33},"end":{"row":66,"column":34},"action":"insert","lines":["0"]}]}],[{"group":"doc","deltas":[{"start":{"row":66,"column":34},"end":{"row":66,"column":35},"action":"insert","lines":["0"]}]}],[{"group":"doc","deltas":[{"start":{"row":67,"column":32},"end":{"row":67,"column":35},"action":"remove","lines":["200"]},{"start":{"row":67,"column":32},"end":{"row":67,"column":33},"action":"insert","lines":["4"]}]}],[{"group":"doc","deltas":[{"start":{"row":67,"column":33},"end":{"row":67,"column":34},"action":"insert","lines":["0"]}]}],[{"group":"doc","deltas":[{"start":{"row":67,"column":34},"end":{"row":67,"column":35},"action":"insert","lines":["0"]}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":6,"column":0},"end":{"row":6,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1421091193265,"hash":"535871025604db6b7bd991ff1e254c6ad8513f79"}